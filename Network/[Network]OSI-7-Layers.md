# OSI 7 계층

##  OSI 7계층이란?
OSI란 Open System Interconnection의 약어로 국제 표준화 기구 ISO가 제안한 네트워크 통신의 표준안이다.
7계층으로 나눈 이유는 네트워크 통신 도중 발생할 수 있는 문제들을 각각의 레벨 안에서 처리하기 위해서이다.

<br>

![osi-7-layers](osi-7-layers.png)

## 1계층 - 물리 계층 (Physical Layer)

> * 리피터, 케이블, 허브  
> * 데이터 단위 : 비트 (bit)

물리계층에서는 말그대로 통신의 물리적인 것을 담당한다.
유선 LAN 기술을 표준화한 **IEEE802.3**과 무선 LAN 기술을 표준화 한 **IEEE802.11**로 나눌 수 있다.
IEEE802.3의 프로토콜 이름은 `[전송속도] BASE - [전송 매체나 레이저의 종류]` 의 형태로 지어진다.  
ex) 10GBASE-T (LAN 케이블[트위스트 페어 케이블]로 10Gbps의 전송 속도를 구현하는 프로토콜)  

**전송 속도**

| 표기   | 전송 속도     |
|------|-----------|
| 100  | 100Mbps   |
| 1000 | 1Gbps     |
| 10G  | 10Gbps    |
| 25G  | 25Gbps    |
| 40G  | 40Gbps    |
| 100G | 100Gbps   |

**전송 매체나 레이저의 종류**

| 표기  | 의미          |
|-----|-------------|
| T   | 트위트스 페어 케이블 |
| S   | 단파장 레이저     |
| L   | 장파장 레이저     |
| C   | 동축 케이블      |

### 트위스트 페어 케이블 
트위스트 페어 케이블은 컽으로 보기에는 하나의 케이블이지만, 사실 8가닥의 구리선을 두가닥씩 짝지어(pair) 꼬아서(twisted) 하나로 묶은 케이블이다.
실드 유무에 따라 **UTP**(Unshielded Twisted Pair)와 **STP**(Shielded Twisted Pair) 케이블로 분류할 수 있다.  
서로 꼬아져 있는 이유는 다른 전자기적 간섭을 최소화하기 위해서이다.

### 광섬유 케이블
광섬유 케이블은 거리를 늘려도 신호가 쉽게 감쇠하지 않기에 광대역을 유지할 수 있다. 
빛의 굴절률이 높은 **코어**(core)와, 굴절률이 비교적 낮은 **클래딩**(cladding)의 2층으로 구성되어 있고, 이 빛의 전송로를 모드(mode)라고 부른다.  
모드가 여럿 있다면 *다중 모드 광섬유 케이블*(MMF)이고 코어 지름이 작고 클래딩 비중이 커서 코어를 흐르는 모드가 하나라면 *단일 모드 광섬유 케이블*(SMF)이다.  

| 비교 항목      | 트위스트 페어 케이블 | 광섬유 케이블 |
|------------|-------------|---------|
| 전송 매체 재료   | 구리          | 유리      |
| 전송 속도      | 느림          | 빠름      |
| 신호 감쇄      | 큼           | 적음      |
| 전송 거리      | 짧음          | 김       |
| 전자석 노이즈 경향 | 큼           | 없음      | 
| 반환         | 쉬움          | 어려움     | <!-무엇을 반환하는거지?>
| 비용         | 적음          | 많음      |


<!ToDo: 무선 LAN, CSMA/CD, 주파수 대역>

<br>

## 2계층 - 데이터링크 계층 (Datalink Layer)

> * 브릿지, 스위치
> * 데이터 단위 : 패킷 (packet)

데이터링크 계층은 같은 네트워크에 있는 단말을 식별하고, 물리 계층 위에서 비트열을 정확히 전송하는 구조를 제공한다.  
에러검출, 재전송, 흐름 제어의 역활을 수행한다.
데이터링크 계층에서 통신하려면 수신지와 송신지의 **MAC**주소가 필요하다.  

### MAC 주소
MAC 주소는 이더넷 네트워크에 접속되어 있는 단말의 식별 ID이다. 6바이트(48bit)로 구성되며, 16진수로 표기한다.  
`00-0c-29-43-5e-be` 혹은 `04:0c:ce:da:3a:6c`  
MAC 주소의 상위 3바이트는 IEEE가 벤더별로 할당한 벤더 코드로 
**OUI**(Organizationally Unique Identifier)라 
부르고, 통신하는 단말의 NIC를 어떤 벤더가 제조했는지 [사이트](http://standards-oui.ieee.org/oui/oui.txt)에서 확인할 수 있다.  
하위 3바이트는 **UAA**(Universal Administered Address)라 부르고 출하 시 벤더에서 할당하거나 무작위로 생성한 값이다.  

### 통신
이더넷 네트워크에서 통신은 3가지로 구분된다.

#### 유니캐스트(unicast)
유니캐스트는 1대 1통신이다. 때문에 서로의 MAC주소를 갖고 송신지 MAC주소, 수신지 MAC주소를 만든다. 웹이나 메일 등 인터넷 통신의 대부분은 유니캐스트이다.  
<br>

#### 브로드캐스트(broadcast)
브로드캐스트는 1대 n통신이다. 여기에서의 n은 같은 이더넷 네트워크에 접속되어 있는 자신 외의 모든 단말을 의미한다. 
A단말이 브로드캐스트 송신을 하면 그 이더넷 네트워크에 있는 A이외의 모든 단말이 그 프레임을 수신한다. 이때 송신지 MAC주소는 A단말의 MAC주소이고, 
수신지 MAC주소는 어느 하나 특정할 수 없기 때문에 6바이트가 모두 1인 값, 즉 `ff:ff:ff:ff:ff:ff`를 사용한다.  

<br>

#### 멀티캐스트(multicast)
멀티캐스트는 1대 n통신이다. 여기에서의 n은 특정 그룹에 속하는 단말이다. A단말이 멀티캐스트 송신을 하면 그 그룹에 있는 단말들만 그 패킷을 수신한다.  
~~트위터의 써클이나 인스타그램의 친한 친구와 같은 기능이라고 할 수 있다. 트위터 써클은 최근에 결함이 있는것 같지만~~  
송신지의 MAC 주소는 송신 단말의 MAC 주소가 그대로 사용되고, 수신지 MAC 주소는 네트워크 계층에서 받아온 IP를 이용한다.

### L2 스위치
L2 스위치는 이더넷 헤더에 포함된 송신지 MAC 주소와 자신의 포트 번호를 MAC 주소 테이블이라는 메모리상의 테이블로 관리하면서,
이더넷프레임의 전송 대상지를 바꾸어 통신 효율을 높인다.